{% extends 'layout.html.twig' %}

{% block title %}Expérience{% endblock %}

{% block body %}
    <div class="pt-24">
        {% embed "blocks/title.html.twig" with {'pagetitle':"Expériences professionnelles"} %}{% endembed %}
    </div>
    
    {% for experience in data.experiencesList %}
        <section class="{% if loop.index is even %}lighten{% else %}bg-gray{% endif %}">
            <div class="flex flex-col w-full mt-0 lg:flex-row sm:mt-10 lg:mt-20">
                <div class="w-full max-w-md p-4 mx-auto mb-0 sm:mb-16 lg:mb-0 lg:w-1/4 wow animate__animated animate__fadeInLeft" data-wow-delay="0.6s">
                    <div class="relative flex flex-col items-center w-full h-full mr-5 rounded-lg" style="background-image:url('{{ asset('images/global/background-path-'~ random(1,3) ~'.svg') }}');background-repeat: no-repeat;">
                        <h2 class="relative my-6 text-4xl font-accent font-bold text-turquoise">{{ experience.startDate|date("Y") }}</h2>
                        <img  class="relative w-20 h-20" src="{{ absolute_url('images/company/' ~ experience.company.logo) }}" />
                        <p class="relative mt-5"><i class="far fa-calendar-alt mr-1"></i>&nbsp;
                                {% if experience.endDate is empty %}
                                    Depuis {{ experience.startDate|date("m/Y") }}
                                {% else %}
                                    De {{ experience.startDate|date("m/Y") }} à {{ experience.endDate|date("m/Y") }}
                                {% endif %}
                                <i class="text-09">(
                                    {% if experience.duration.nbYears > 0 %}
                                        {{ experience.duration.nbYears }}
                                        an{% if experience.duration.nbYears > 1 %}s{% endif %}
                                    {% endif %}
                                    {% if experience.duration.nbMonths != 0 %}
                                        {% if experience.duration.nbYears > 0 %}
                                            et
                                        {% endif %}
                                        {{ experience.duration.nbMonths }} mois
                                    {% endif %}
                                    )</i>
                            </p>
                        <p class="relative">
                            <i class="fas fa-map-marker-alt mr-1"></i> {{ experience.company.name }}
                            - <span class="text-xs">{{ experience.company.city }} ({{ experience.company.department|format_number({min_integer_digit:2}) }})</span>
                        </p>
                    </div>
                </div>
                <div class="w-full max-w-xl p-4 mx-auto mb-0 sm:mb-16 lg:mb-0 lg:w-3/4 wow animate__animated animate__fadeInRight" data-wow-delay="0.6s">
                    <h2 class="text-xl font-accent font-semibold text-blue-medium">{{ experience.title }}</h2>
                    <h4 class="font-accent font-semibold text-turquoise pb-8">{{ experience.subtitle }}</h4>
                    <div class="">
                        {{ experience.description|raw }}
                    </div>

                    {% if experience.skills is not empty %}
                    <p class="pt-10 pb-4"><b class="">Stack technique</b></p>
                    <div
                        x-data="{}"
                        x-init="$nextTick(() => {
                            let ul = $refs.logos;
                            ul.insertAdjacentHTML('afterend', ul.outerHTML);
                            ul.nextSibling.setAttribute('aria-hidden', 'true');
                        })"
                        class="w-full inline-flex flex-nowrap overflow-hidden [mask-image:_linear-gradient(to_right,transparent_0,_black_128px,_black_calc(100%-128px),transparent_100%)]"
                    >
                        <ul x-ref="logos" class="flex items-center justify-center md:justify-start [&_li]:mx-8 [&_img]:max-w-none animate-infinite-scroll">
                            {% for skill in experience.skills %}
                            <li>
                                <img src="{{ absolute_url('images/skills/' ~ skill.logo) }}" alt="{{ skill.name }}" width="40px" />
                            </li>
                            {% endfor %}
                        </ul>                
                    </div>
                    {% endif %}
                </div>
            </div>
        </section>
    {% endfor %}

{% endblock %}